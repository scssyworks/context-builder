{"version":3,"file":"contextBuilder.iife.js","sources":["../../src/Select/index.js","../../src/CursorPlacement/index.js","../../src/index.js","../../render/index.js"],"sourcesContent":["export class Select {\n    constructor(selector, thisParent) {\n        // Check if document and document.body exist\n        this.body = typeof document !== 'undefined' && document && document.body;\n        // Resolve parent\n        this.parent = thisParent || null;\n        // Resolve references\n        this.elements = [];\n        if (this.body && selector) {\n            if (typeof selector === 'string') {\n                this.elements = [...document.querySelectorAll(selector)];\n            } else if (selector instanceof Node) {\n                this.elements = [selector];\n            } else if (selector instanceof NodeList || selector instanceof HTMLCollection) {\n                this.elements = [...selector];\n            } else if (Object.prototype.hasOwnProperty.call(selector, 'length')) { // For jQuery or jQuery like objects\n                for (let i = 0; i < selector.length; i++) {\n                    this.elements.push(selector[i]);\n                }\n            } else if (selector instanceof Select) {\n                this.elements = [...selector.elements];\n                this.parent = selector.parent;\n            }\n        }\n    }\n    /**\n     * Query children of current element\n     * @param {string} selector Selector\n     */\n    query(selector) {\n        const selected = [];\n        this.elements.forEach(el => {\n            const children = [...el.querySelectorAll(selector)];\n            children.forEach(child => {\n                if (selected.indexOf(child) === -1) {\n                    selected.push(children);\n                }\n            });\n        });\n        return new Select(selected, this);\n    }\n    /**\n     * Appends HTML body to current element(s)\n     * @param {string | Node | NodeList | HTMLCollection | Node[] | Select} nodes \n     */\n    append(nodes) {\n        if (this.body) {\n            let consumableNodes;\n            if (typeof nodes === 'string') {\n                // Expecting a plain HTML string\n                const tempDiv = document.createElement('div');\n                tempDiv.innerHTML = nodes;\n                consumableNodes = new Select(tempDiv.childNodes);\n            } else {\n                // For everything else treat them as regular nodes\n                consumableNodes = new Select(nodes);\n            }\n            this.elements.forEach((target, i) => {\n                if (consumableNodes.elements.length === 1) {\n                    target.appendChild(consumableNodes.elements[0]); // Keeping intact the original reference\n                } else {\n                    const fragment = document.createDocumentFragment();\n                    consumableNodes.elements.forEach(n => {\n                        fragment.appendChild(i === 0 ? n : n.cloneNode());\n                    });\n                    target.appendChild(fragment);\n                }\n            });\n        }\n        return this;\n    }\n    /**\n     * Prepends HTML body to current element(s)\n     * @param {string | Node | NodeList | HTMLCollection | Node[] | Select} nodes\n     */\n    prepend(nodes) {\n        if (this.body) {\n            this.elements.forEach(target => {\n                const currentFragment = (new Select(target.childNodes)).detach();\n                (new Select(target)).append(nodes).append(currentFragment);\n            });\n        }\n        return this;\n    }\n    /**\n     * Removes current set of elements from DOM and return DocumentFragment as a Select instance\n     */\n    detach() {\n        if (this.body) {\n            const fragment = document.createDocumentFragment();\n            this.elements.forEach(el => {\n                fragment.appendChild(el);\n            });\n            return new Select(fragment);\n        }\n        return this;\n    }\n    /**\n     * Clears current elements inner HTML\n     */\n    clear() {\n        if (this.body) {\n            this.elements.forEach(el => {\n                el.innerHTML = '';\n            });\n        }\n        return this;\n    }\n    /**\n     * Returns current map of HTML strings\n     */\n    htmlMap() {\n        return this.map(el => el.innerHTML);\n    }\n    /**\n     * Returns current map of text strings\n     */\n    textMap() {\n        return this.map(el => el.textContent || el.innerText);\n    }\n    /**\n     * Returns current list of element as array\n     * @param {Function} evaluatorFn Evaluator function\n     */\n    map(evaluatorFn) {\n        if (!this.body || typeof evaluatorFn !== 'function') {\n            return this.elements;\n        }\n        return this.elements.map(evaluatorFn);\n    }\n    /**\n     * Returns current body tag as a Select instance\n     */\n    getBodyTag() {\n        return new Select(this.body);\n    }\n    /**\n     * Returns current Select reference children\n     */\n    children() {\n        const elements = [];\n        this.elements.forEach(el => {\n            [...el.childNodes].forEach(n => {\n                if (elements.indexOf(n) === -1) {\n                    elements.push(n);\n                }\n            });\n        });\n        return new Select(elements);\n    }\n    /**\n     * Binds a regular event listener\n     */\n    on() {\n        this.elements.forEach(el => {\n            el.addEventListener(...arguments);\n        });\n        return this;\n    }\n    /**\n     * Removes a regular event listener\n     */\n    off() {\n        this.elements.forEach(el => {\n            el.removeEventListener(...arguments);\n        });\n        return this;\n    }\n    /**\n     * Returns map of DOMRect objects\n     */\n    bounds() {\n        return this.map(el => el.getBoundingClientRect());\n    }\n    /**\n     * Sets CSS properties to element(s)\n     * @param {object} obj CSS properties\n     */\n    setCSSProps(obj) {\n        this.elements.forEach(el => {\n            Object.keys(obj).forEach(prop => {\n                el.style[prop] = obj[prop];\n            });\n        });\n        return this;\n    }\n    /**\n     * Enforce a repaint of targeted elements\n     */\n    repaint() {\n        this.elements.forEach(el => {\n            el.offsetHeight; // Accessing offset height somehow triggers a reflow\n        });\n        return this;\n    }\n    /**\n     * Static method to create a new HTML node\n     * @param {string | Node | NodeList | HTMLCollection | Node[] | Select} nodes\n     */\n    static create(nodes) {\n        return (new Select(document.createDocumentFragment()))\n            .append(nodes)\n            .children();\n    }\n}","import { Select } from '../Select';\n\nexport class CursorPlacement {\n    constructor(event, element) {\n        this.target = new Select(element);\n        this.targetPlacement = this.target.bounds()[0];\n        this.windowProps = {\n            width: window.innerWidth,\n            height: window.innerHeight\n        };\n        this.target.setCSSProps({\n            position: 'fixed',\n            top: `${this.getClientY(event)}px`,\n            left: `${this.getClientX(event)}px`\n        });\n    }\n    /**\n     * Returns context menu's approximate position on X axis\n     * @param {Event} event Event object\n     */\n    getClientX(event) {\n        if (event.clientX + this.targetPlacement.width > this.windowProps.width) {\n            return event.clientX - this.targetPlacement.width;\n        }\n        return event.clientX;\n    }\n    /**\n     * Returns context menu's approximate position on Y axis\n     * @param {Event} event Event object\n     */\n    getClientY(event) {\n        if (event.clientY + this.targetPlacement.height > this.windowProps.height) {\n            return event.clientY - this.targetPlacement.height;\n        }\n        return event.clientY;\n    }\n}","import { Select } from './Select';\nimport { CursorPlacement } from './CursorPlacement';\n\nexport class ContextMenu {\n    constructor(target, config) {\n        if (config && typeof config === 'object') {\n            this.config = Object.freeze(config);\n        }\n        this.contextTarget = typeof target === 'string'\n            ? new Select(target)\n            : new Select().getBodyTag();\n        this.isSupported = !!this.contextTarget.body;\n        this.rootElement = Select.create(\n            this.config && this.config.rootElement\n                ? this.config.rootElement\n                : `<ul class=\"context-menu-list\"></ul>`\n        );\n        const ref = this;\n        this.contextTarget\n            .on('contextmenu', function (e) {\n                e.preventDefault();\n                (new Select(this)).append(ref.rootElement);\n                new CursorPlacement(e, ref.rootElement);\n                if (\n                    ref.config\n                    && typeof ref.config.onActivate === 'function'\n                ) {\n                    ref.rootElement.repaint();\n                    config.onActivate(ref.rootElement.map());\n                }\n            })\n            .on('click', () => {\n                const exitFunction = () => {\n                    this.rootElement = this.rootElement.detach().children();\n                };\n                if (\n                    this.config\n                    && typeof config.onDeactivate === 'function'\n                ) {\n                    config.onDeactivate(exitFunction);\n                } else {\n                    exitFunction();\n                }\n            });\n        this.rootElement.on('click', (e) => {\n            e.stopPropagation();\n        });\n    }\n    add(element) {\n        if (\n            element instanceof ContextList\n            || element instanceof ContextItem\n        ) {\n            this.rootElement.append(element.rootElement);\n        }\n    }\n}\n\n// Generates a context list\nexport class ContextList {\n    constructor(title, config) {\n        if (config && typeof config === 'object') {\n            this.config = Object.freeze(config);\n        }\n        this.rootElement = Select.create(\n            this.config && this.config.rootElement\n                ? this.config.rootElement\n                : `<li class=\"menu-item\"></li>`\n        );\n        this.listElement = Select.create(\n            this.config && this.config.listElement\n                ? this.config.listElement\n                : `<ul class=\"context-submenu\"></ul>`\n        );\n        this.rootElement\n            .append(title)\n            .append(this.listElement);\n    }\n}\n\n// Generates a context item\nexport class ContextItem { }","import { ContextMenu, ContextList } from '../src';\n\nconst menu = new ContextMenu();\nmenu.add(\n    new ContextList('test')\n);"],"names":["Select","selector","thisParent","body","document","parent","elements","querySelectorAll","Node","NodeList","HTMLCollection","Object","prototype","hasOwnProperty","call","i","length","push","selected","forEach","el","children","child","indexOf","nodes","consumableNodes","tempDiv","createElement","innerHTML","childNodes","target","appendChild","fragment","createDocumentFragment","n","cloneNode","currentFragment","detach","append","map","textContent","innerText","evaluatorFn","addEventListener","arguments","removeEventListener","getBoundingClientRect","obj","keys","prop","style","offsetHeight","CursorPlacement","event","element","targetPlacement","bounds","windowProps","width","window","innerWidth","height","innerHeight","setCSSProps","position","top","getClientY","left","getClientX","clientX","clientY","ContextMenu","config","freeze","contextTarget","getBodyTag","isSupported","rootElement","create","ref","on","e","preventDefault","onActivate","repaint","exitFunction","onDeactivate","stopPropagation","ContextList","ContextItem","title","listElement","menu","add"],"mappings":"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"}